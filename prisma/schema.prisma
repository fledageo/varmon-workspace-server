generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id         Int        @id @default(autoincrement())
  first_name String
  last_name  String
  email      String     @unique
  role       Role       @default(user)
  created_at DateTime   @default(now())
  password   String?
  status     UserStatus @default(inactive)
  cases      Case[]     @relation("AssignedEmployee")
}

model Case {
  id                   Int           @id @default(autoincrement())
  entryDate            DateTime
  entryNumber          String
  caseNumber           String
  judge                String
  plaintiff            String
  defendant            String
  investigatedAddress  String
  propertyType         String
  caseType             String
  assigned_employee_id Int?
  price                Float
  payment_type         PaymentTypes
  status               CaseStatus
  closed_at            DateTime?
  isPaid               Boolean       @default(false)
  assignedEmployee     User?         @relation("AssignedEmployee", fields: [assigned_employee_id], references: [id])
  expenditures         Expenditure[]
  files                File[]        @relation("CaseFiles")
  notes                Note[]
}

model Note {
  id          Int      @id @default(autoincrement())
  case_id     Int
  created_at  DateTime @default(now())
  description String
  title       String
  case        Case     @relation(fields: [case_id], references: [id], onDelete: Cascade)
}

model Expenditure {
  id          Int      @id @default(autoincrement())
  description String
  amount      Float
  created_at  DateTime @default(now())
  case_id     Int
  case        Case     @relation(fields: [case_id], references: [id], onDelete: Cascade)
}

model File {
  id          Int      @id @default(autoincrement())
  case_id     Int
  filename    String
  file_url    String
  uploaded_at DateTime @default(now())
  caseNumber  String           
  case        Case @relation("CaseFiles", fields: [case_id], references: [id], onDelete: Cascade)
}

enum Role {
  admin
  user
}

enum UserStatus {
  inactive
  active
}

enum CaseStatus {
  waiting
  in_progress
  completed
  closed
}

enum PaymentTypes {
  cash
  transfer
  court
}
